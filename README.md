# 聚宽策略与iQuant对接说明

## 系统架构

本系统实现了聚宽策略与iQuant的自动化对接：
- **聚宽端**：负责策略计算，生成交易信号并保存到数据库
- **数据库**：作为中间层，存储待执行的交易订单
- **iQuant端**：读取数据库中的订单并执行实际交易

## 运行流程

1. **聚宽策略（joinquant.py）**
   - 9:05 - 准备股票列表
   - 9:15 - 推送当天目标持仓到数据库
   - 13:55 - 执行周度调仓，生成交易信号
   - 13:56 - 检查涨停板是否打开

2. **iQuant执行器（iquant_executor.py）**
   - 14:00 - 读取数据库中当天的未执行订单
   - 自动执行买卖操作
   - 执行成功后更新订单状态为已处理

## 数据库配置

- 地址：sh-cdb-kgv8etuq.sql.tencentcdb.com
- 端口：23333
- 数据库：order
- 表名：joinquant_stock
- 字符集：utf8mb4

## 使用说明

### 聚宽端
1. 将 `joinquant.py` 部署到聚宽平台
2. 策略会自动创建数据库表（首次运行）
3. 每天自动推送交易信号到数据库

### iQuant端
1. 将 `iquant_executor.py` 部署到iQuant
2. 修改账户信息：`account = "xxxxxxxx"`
3. 每天14:00自动执行当天的交易订单

## 注意事项

1. 确保数据库连接正常
2. iQuant执行时间（14:00）在聚宽下单时间（13:55）之后
3. 每个订单只会执行一次，执行后标记为已处理
4. 自动清理数据：
   - 每次写入前自动删除30天前的历史数据
   - 删除当天的重复数据，避免回测时产生重复订单 